#!/usr/bin/dash
# sdothum - 2016 (c) wtfpl

# Shell
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ................................................................ Session login

fortune=/usr/bin/fortune
user=shum

# console login check
if console ;then
  echo
elif [ -e $FORTUNE:term ] ;then
  if [ ! -e $FORTUNE ] ;then
    if which $fortune >/dev/null 2>&1 ;then
      # su notify to apply user notification (spec)
      [ $USER = root ] && /usr/bin/su -c "/home/$user/bin/notify 10 critical \"$(fortune)\"" - $user 2>/dev/null ||
                          notify 10 "$(fortune)" 2>/dev/null
    fi
    # one fortune is enough
    [ -e $HOME/.fortune ] && rm -f $FORTUNE || touch $FORTUNE
  fi
  # see (herbstluftwm) term
  rm -f $FORTUNE:term 2>/dev/null
fi

# vim: set ft=sh: #
