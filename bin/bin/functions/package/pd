#!/usr/bin/dash

# Package
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ........................................................... Package management

usage() {
  echo "usage: $(basename $0)  'depends on | r'equired by  <package>"
  exit 1
}

[ "$*" ] || usage
[ $1 = h ] && usage

if [ $1 = r ] ;then
  D=N
  shift
  dep='required by'
else
  D=D
  dep='depends on'
fi

# package dependency
if [ "$*" ] ;then
  for i in $@
  do
    if [ "$(expac '%n' $i)" ] ;then
      # list source repository
      echo "$(expac -S '%r/%n' $i) ($dep)$(expac "%$D" $i | sed 's/  */\n/g' | sort | sed 's/^/^/')" | column -s^ -t
    else
      echo ".. \"$i\" not found"
    fi
  done
fi

# vim: set ft=sh: #
