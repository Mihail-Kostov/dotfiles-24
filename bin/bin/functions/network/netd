#!/usr/bin/dash
# sdothum - 2016 (c) wtfpl

# Network
# ▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂

# ....................................................... Network daemon control

usage() {
  echo "usage: $(basename $0) stop | start"
  exit 1
}

daemons='
  bitlbee
  cronie
  dnsmasq
  nfs-server
  nginx
  nzbget
  sonarr
  squid
  sshd
  syncthing@shum
  tt-rss
  znc
'

service() {
  for i in $daemons ;do ditto $i ; systemd $1 $i ;done
}

case $1 in
  stop ) service stop
         sudo chattr -i /etc/resolv.conf
         sudo cp /etc/resolv.google.conf /etc/resolv.conf
         killall conky ;;

  start) service start
         sudo cp /etc/resolv.dnsmasq.conf /etc/resolv.conf
         sudo chattr +i /etc/resolv.conf
         conky
         draw panel ;;

  *    ) usage ;;
esac

# vim: set ft=sh: #
