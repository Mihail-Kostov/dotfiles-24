# ~/.config/mail/mutt/commonrc

# me
set realname = "Steven Hum"
#set signature = "fortune"
#set signature = ~/.signature
set signature = "~/bin/signature.sh |"
unset use_domain
# alternate email addresses
alternates sdothum@gmail.com sdothum@primus.ca steven@thedarnedestthing.com
folder-hook "Clients" "my_hdr From: Steven Hum <steven@thedarnedestthing.com>"
folder-hook "Comments" "my_hdr From: Steven Hum <steven@thedarnedestthing.com>"

# aliases
set alias_file = ~/.config/mail/mutt/aliases
set reverse_alias
set sort_alias = alias
source $alias_file

# mail handling
set check_new = yes
unset confirmappend
set delete = yes
set mail_check = 60
set nomove
set postpone = ask-no
set recall = no
set timeout = 30

# UI tweaks
#set arrow_cursor
unset beep
set beep_new = yes
set fast_reply = yes
set mark_old
set markers = no 
set menu_scroll = yes
set pager_context = 1
set pager_index_lines = 9
set pager_stop = yes
set print = ask-no
set quit = ask-yes
#unset resolve
set smart_wrap
#set status_on_top
push <show-version>

# sort and threading preferences
unset collapse_unread
set sort = threads
set sort_aux = "last-date-received"
set strict_threads = yes
set uncollapse_jump = yes
#folder-hook . "push <esc>V"
set index_format="... %?M?[%M]> &?%s"
folder-hook . 'push <collapse-all>'
macro index,pager <F10> <esc>V

# message content
set askbcc = no
set askcc
set fcc_attach
set forward_quote = yes
set include = yes
unset ignore_list_reply_to
unset reply_self
set reverse_realname
set tilde

# make default search pattern to search in To, Cc and Subject
set simple_search = "~f %s | ~C %s | ~s %s"

# character set on messages that we send
set send_charset = "utf-8"
# if there is no character set given on incoming messages, it is probably windows
set assumed_charset = "iso-8859-1"

# order of headers and what to show
ignore *
unignore From: To: Cc: Subject: Date: 
unignore X-mailer: X-mailing-list: Posted-to:
hdr_order Date: From: To: Cc: Subject:

# formatting
set alias_format = "%4n %2f %t %-12a  %r"
set attach_format = "%u%D%I %t%4n %T%.40d%> [%.7m/%.10M, %.6e%?C?, %C?, %s] "
set attribution = "On %d, %n wrote:\n"
set date_format = "%a, %d %b %Y at %I:%M%P"
set folder_format = "%3C %t%N %F %-8.8u %-8.8g %8s %d %f"
set forward_format = "Fwd: %s"
set indent_str = "> "
#set index_format = "%4C %Z %{%b %d} %-15.15L (%?l?%4l&%4c?) %s"
set index_format = "%4C %Z %{%b %d} %-27.27L (%?l?%4l&%4c?) %s"
set message_format = "%-.16n: %s"
set pager_format = "~~~ On %{%a, %d %b %Y} at [%[%H:%M]] - %s %|~"
set sig_dashes
# show spam score (from spamAssassin only) when reading a message
spam "X-Spam-Score: ([0-9\\.]+).*" "SA: %1"

# some keybinds
bind generic - first-entry
bind generic = last-entry
bind index,pager [ previous-unread
bind index,pager ] next-unread
bind pager <up> previous-line
bind pager <down> next-line
#macro generic \c<space> ":source ~/.config/mail/muttrc<enter>" "reload mutt's configuration file"
macro generic \e<space> ":source ~/.config/mail/muttrc<enter>" "reload mutt's configuration file"
macro index + <next-unread-mailbox>
bind index,pager G group-reply
macro index h "c?t"
macro pager j <next-line>
macro pager k <previous-line>
macro index,pager s <save-message>? "save message to folder"
macro attach s "<save-entry><bol>$HOME/attachments/<eol>" 
macro attach S "<save-entry><bol>/net/downloads/http/<eol>" 
macro attach W <save-entry><kill-line>/home/shum/attachments/
macro attach E <save-entry><kill-line>/home/shum/attachments/<enter>

# view some MIME types inline
set implicit_autoview = no
set mailcap_path = "~/.mailcap"
alternative_order text/plain text/html
auto_view application/msword
auto_view application/pdf
#auto_view text/html
auto_view text/html application/x-pgp-message
# url viewing
macro index,pager \cv "<pipe-entry> urlview<enter>" "follow links with urlview"
macro attach,compose \cv "<pipe-entry> urlview<enter>" "follow links with urlview"
macro index,pager \cb "<pipe-message> urlscan<Enter>" "extract URLs out of a message"
macro attach,compose \cb "<pipe-entry> urlscan<Enter>" "extract URLs out of a message"

# global folder keybindings
macro index,pager gg "<change-folder>=sdothum/gmail<enter>" "go to inbox"
macro index,pager gs "<change-folder>=sdothum/system/Sent<enter>" "go to sent mail"
macro index,pager gj "<change-folder>=sdothum/system/Spam<enter>" "go to spam mail"
macro index,pager gt "<change-folder>=sdothum/system/Trash<enter>" "go to trash mail"
# macro index,pager ga "<change-folder>=sdothum/user/astronomy<enter>" "go to astronomy mail"
# macro index,pager gc "<change-folder>=sdothum/user/clients<enter>" "go to clients mail"
# macro index,pager gC "<change-folder>=sdothum/user/community<enter>" "go to community mail"
# macro index,pager gd "<change-folder>=sdothum/user/dailies<enter>" "go to dailies mail"
# macro index,pager gD "<change-folder>=sdothum/user/darkroom<enter>" "go to darkroom mail"
# macro index,pager ge "<change-folder>=sdothum/user/eagles<enter>" "go to eagles mail"
# macro index,pager gf "<change-folder>=sdothum/user/family<enter>" "go to family mail"
# macro index,pager gF "<change-folder>=sdothum/user/fletcher<enter>" "go to fletcher mail"
# macro index,pager gH "<change-folder>=sdothum/user/hardware<enter>" "go to hardware mail"
# macro index,pager gh "<change-folder>=sdothum/user/heilkunst<enter>" "go to heilkunst mail"
# macro index,pager gi "<change-folder>=sdothum/user/ideas<enter>" "go to ideas mail"
# macro index,pager gl "<change-folder>=sdothum/user/lua<enter>" "go to lua mail"
# macro index,pager gm "<change-folder>=sdothum/user/mail<enter>" "go to mail mail"
# macro index,pager gn "<change-folder>=sdothum/user/news<enter>" "go to news mail"
# macro index,pager go "<change-folder>=sdothum/user/oaog<enter>" "go to oaog mail"
# macro index,pager gp "<change-folder>=sdothum/user/personal<enter>" "go to personal mail"
# macro index,pager gG "<change-folder>=sdothum/user/photography<enter>" "go to photography mail"
# macro index,pager g* "<change-folder>=sdothum/user/planetarium<enter>" "go to planetarium mail"
# macro index,pager g8 "<change-folder>=sdothum/user/planetarium<enter>" "go to planetarium mail"
# macro index,pager gP "<change-folder>=sdothum/user/powerpath<enter>" "go to powerpath mail"
# macro index,pager gW "<change-folder>=sdothum/user/providers<enter>" "go to providers mail"
# macro index,pager gr "<change-folder>=sdothum/user/ravens<enter>" "go to ravens mail"
# macro index,pager gs "<change-folder>=sdothum/user/services<enter>" "go to services mail"
# macro index,pager g! "<change-folder>=sdothum/user/shell<enter>" "go to shell mail"
# macro index,pager g1 "<change-folder>=sdothum/user/shell<enter>" "go to shell mail"
# macro index,pager gS "<change-folder>=sdothum/user/software<enter>" "go to software mail"
# macro index,pager g$ "<change-folder>=sdothum/user/store<enter>" "go to store mail"
# macro index,pager g4 "<change-folder>=sdothum/user/store<enter>" "go to store mail"
# macro index,pager gt "<change-folder>=sdothum/user/travel<enter>" "go to travel mail"
# macro index,pager gu "<change-folder>=sdothum/user/unix<enter>" "go to unix mail"
# macro index,pager gv "<change-folder>=sdothum/user/wiki<enter>" "go to wiki mail"
# macro index,pager gN "<change-folder>=sdothum/user/x11<enter>" "go to x11 mail"
macro index,pager gc "<change-folder>=comments/thedarnedestthing<enter>" "go to bodyshamanics mail"
macro index,pager gb "<change-folder>=bodyshamanics/bodyshamanics<enter>" "go to bodyshamanics mail"
macro index,pager gp "<change-folder>=steven/private<enter>" "go to private mail"
macro index,pager gw "<change-folder>=webmaster/webmaster<enter>" "go to bodyshamanics mail"
macro index,pager ga "<change-folder>=thedarnedestthing/admin<enter>" "go to admin mail"
#macro index,pager g- "\cp\co" "go to previous mailbox"
#macro index,pager g= "\cn\co" "go to next mailbox"
macro index,pager g[ "\cp\co" "go to previous mailbox"
macro index,pager g] "\cn\co" "go to next mailbox"
# must use "c" to select archive, important, starred

