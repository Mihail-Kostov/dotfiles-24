# ~/.config/mail/mutt/extensionsrc

# editor
set edit_headers = no
bind editor ^T complete
bind editor <Tab> complete-query
bind editor <space> noop
#set editor = "focuswriter"
#set editor = "nano"
#set editor = "pyroom"
set editor = "vim -g -f + -c 'set enc=utf-8 filetype=mail formatoptions=twan1 syntax=mail textwidth=72' -c 'set nocp spell wrap' '+0r ~/.config/mail/separator'"
#set editor = "/usr/local/bin/retext"

# printing
#set print_command = "lpr -p"
set print_command = "muttprint %s"

# address book
set query_command= "abook --mutt-query '%s'"
macro index,pager A "<pipe-message>abook --add-email<enter>" "add the sender address to abook"
macro generic,index,pager \ca "<shell-escape>abook<enter>" "launch abook"

# mu/notmuch search
#mailboxes "=gmail/Search"
#macro index <F8> "<shell-escape>mu find --clearlinks --format=links --linksdir=~/.mail/gmail/Search " "mu find"
#macro index <F7> "<change-folder-readonly>=gmail/Search<enter>" "search results"
# search folder here to avoid redundant indexing by notmuch and sidebar indent
mailboxes "=.notmuch/=Search"
macro index,pager <F8> "<enter-command>unset wait_key<enter> \
                        <shell-escape>/usr/local/bin/mutt-notmuch --prompt search<enter> \
                        <change-folder-readonly>=.notmuch/=Search<enter>" \
                        "search mail (using notmuch)"
macro index <F7> "<change-folder-readonly>=.notmuch/=Search<enter>" "search results"
macro index <F9> "<enter-command>unset wait_key<enter> \
                  <pipe-message>/usr/local/bin/mutt-notmuch thread<enter> \
                  <change-folder-readonly>=.notmuch/=Search<enter> \
                  <enter-command>set wait_key<enter>" \
                  "search and reconstruct owning thread (using notmuch)"
macro index <F6> "<enter-command>unset wait_key<enter> \
                  <pipe-message>/usr/local/bin/mutt-notmuch tag -inbox<enter>" \
                  "remove message from inbox (using notmuch)"

# sidebar patch 
#set sidebar_delim = "|" 
set sidebar_delim = " " 
set sidebar_sort = no 
set sidebar_visible = yes 
set sidebar_width = 27 
# ctrl-n, ctrl-p to select next, prev folder 
# ctrl-o to open selected folder 
bind index,pager \cp sidebar-prev 
bind index,pager \cn sidebar-next 
bind index,pager \co sidebar-open 
bind index,pager <esc>p sidebar-scroll-up
bind index,pager <esc>n sidebar-scroll-down
macro index,pager b "<enter-command>toggle sidebar_visible<enter>" 
# remap bounce-message function to "B" 
bind index B bounce-message 
# Mario Holbe suggests: 
#macro index b "<enter-command>toggle sidebar_visible<enter><refresh>" 
#macro pager b "<enter-command>toggle sidebar_visible<enter><redraw-screen>"
