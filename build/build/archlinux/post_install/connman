#!/usr/bin/dash

# Post_install
# ▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

# ...................................................................... connman

[ -d /etc/connman ] || sudo mkdir /etc/connman
[ -f /etc/connman/main.conf ] || echo '[General]
PreferredTechnologies=ethernet,wifi' | sudo tee /etc/connman/main.conf
sudo systemctl restart connman

connmanctl enable wifi
connmanctl scan wifi
connmanctl services
annotate 'connmanctl> agent on
connmanctl> connect [network]
connmanctl> config [network] --autoconnect True'
connmanctl

original /lib/systemd/system/connman.service
# disable connman dnsproxy port 53 usage (conflicts with dnsmasq)
sudo sed -i '/^\(ExecStart=\/usr\/bin\/connmand -n\)$/s/$/ --nodnsproxy/' /lib/systemd/system/connman.service

sudo systemctl disable dhcpcd
sudo systemctl disable netctl
systemd enable connman

# vim: set ft=sh: #
