#!/usr/bin/dash
# sdothum - 2016 (c) wtfpl

# User_install
# ▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂▂

# ............................................................... networkmanager

# get network hosts table
original /etc/hosts
config_install L /etc/hosts

# add host ip address

address() {
  ip address show | grep 'inet 10\.1\.0\.' | head -1 | sed -r 's| *inet (.*)/.*|\1|'
}

grep $(hostname) /etc/hosts &&
  sudo sed -i "/$(hostname)/s/[0-9.]*/$(address)/" /etc/hosts ||
  echo $(address) $(hostname) | sudo tee >>/etc/hosts

sudo wifi-menu

! server && annotate 'check /etc/hosts (luna) if wlan0 errors on boot'

# vim: set ft=sh: #
